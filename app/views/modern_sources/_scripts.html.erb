<script type="text/javascript">
let modernSourcesVue;
$(document).ready(function(){
	modernSourcesVue = new Vue({
		name: 'modernSourcesVue',
		el: '#modern-source-form',
		data: {
			author_type: '<%= modern_source.author_type %>',
			urls: <%= modern_source.source_urls.map(&:url).to_json.html_safe %>,
			source_type: '<%= modern_source.source_type %>',
		},
		computed: {
			title_orig_label(){
				switch(this.source_type){
					case 'journal_article':
						return "Title of article in original language";
					case 'unpublished_document':
						return 'Document title in original language';
					case 'web_page':
						return "Title of webpage";
					case "handwritten_document":
						return "Document title in original language";
					default: 
						return 'Book title in original language';
				}
			},
		},
		mounted(){
			runTomSelects();
		},
	});
});

function runTomSelects(){
	new TomSelect("#modern_source_source_type",{
		sortField: {
			field: "text",
			direction: "asc"
		},
		maxItems: 1,
	});
	new TomSelect("#author_reference_id",{
		sortField: {
			field: "text",
			direction: "asc",
		},
		maxItems: null,
		lockOptgroupOrder: true,
	});
	new TomSelect("#modern_source_institution_id",{
		sortField: {
			field: "text",
			direction: "asc"
		},
		maxItems: 1,
	});
	new TomSelect("#editor_reference_id",{
		sortField: {
			field: "text",
			direction: "asc",
		},
		maxItems: null,
		lockOptgroupOrder: true,
	});
	new TomSelect("#translator_reference_id",{
		sortField: {
			field: "text",
			direction: "asc",
		},
		maxItems: null,
		lockOptgroupOrder: true,
	});
	new TomSelect("#modern_source_publication_location_id",{
		sortField: {
			field: "text",
			direction: "asc"
		},
		maxItems: 1,
	});
	new TomSelect("#modern_source_document_type",{
		sortField: {
			field: "text",
			direction: "asc"
		},
		maxItems: 1,
	});
};
</script>
