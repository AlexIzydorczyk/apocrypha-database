<%= form_with(model: manuscript, id: "manuscript-form") do |form| %>
	<div class="row">
  	<div class="form-group col-md-2 mb-2">
		  <%= form.label :identifier, "Manuscript ID", style: "display: block" %>
	    <%= form.text_field :identifier, class: "form-control" %>
		</div>
  	<div class="form-group col-md-2 mb-2">
		  <%= form.label :census_no, style: "display: block" %>
	    <%= form.text_field :census_no, class: "form-control" %>
		</div>
  	<div class="form-group col-md-3 mb-2">
		  <%= form.label :status, style: "display: block" %>
	    <%= form.select :status, options_for_select(%w(extant lost destroyed)), {include_blank: true}, class: "form-control" %>
		</div>
		<div class="form-group col-md-12 mb-2">
		  <%= form.label :institution_id, "Repository", style: "display: block" %>
			<select id="institution-select" placeholder="Select a person..." autocomplete="off">
	      <option value="">Select a person...</option>
	      <% Institution.all.each do |i| %>
	        <option value="<%= i.id %>"><%= i.name_english %></option>
	      <% end %>
	    </select>
		</div>
  	<div class="form-group col-md-12 mb-2">
		    <%= form.label :shelfmark, style: "display: block" %>
	    <%= form.text_field :shelfmark, class: "form-control" %>
		</div>
  	<div class="form-group col-md-12 mb-2">
		    <%= form.label :old_shelfmark, "Old shelfmarks", style: "display: block" %>
	    <%= form.text_field :old_shelfmark, class: "form-control" %>
		</div>
	</div>
	<h2>Description</h2>
	<div class="row">
  	<div class="form-group col-md-6 mb-2">
	    <%= form.label :material, style: "display: block" %>
    	<%= form.select :material, options_for_select(["paper", "parchment", "parchment and paper"]), {include_blank: true}, class: "form-control" %>
		</div>
		<div class="form-group col-md-6 mb-2">
		    <%= form.label :content_type, style: "display: block" %>
	    <%= form.text_field :content_type, class: "form-control" %>
		</div>
		<div class="form-group col-md-6 mb-2">
			<!-- needs to be built the new way still!!! -->
		  <%= form.label :leaf_page_no, style: "display: block" %>
	    <%= form.text_field :leaf_page_no, class: "form-control" %>
		</div>
		<div class="form-group col-md-6 mb-2">
		  <%= form.label :notes, style: "display: block" %>
	    <%= form.text_area :notes, class: "form-control" %>
		</div>
		<!-- need to come back and fix the date range inputs! -->
		<div class="form-group col-md-3 mb-2">
		  <%= form.label :date_from, style: "display: block" %>
	    <%= form.text_field :date_from, class: "form-control" %>
		</div>
  	<div class="form-group col-md-3 mb-2">
		  <%= form.label :date_to, style: "display: block" %>
	    <%= form.text_field :date_to, class: "form-control" %>
		</div>
		<%= fields_for(@language_references) do |lr| %>
			<div class="form-group col-md-6 mb-2">
				<%= lr.label :id, "Languages in manuscript", style: "display: block" %>
				<%= lr.collection_select :id, @languages, "id", "language_name", {selected: @manuscript.languages.map(&:id)}, {class: "form-control", multiple: true} %>
			</div>
		<% end %>
		<div class="form-group col-md-6 mb-2">
		  <%= form.label :dimensions, style: "display: block" %>
	    <%= form.text_field :dimensions, class: "form-control" %>
		</div>

  	
</div>
  <div>
    <%= form.submit "Submit", class: "btn btn-primary mt-2" %>
  </div>

<% end %>


<script type="text/javascript">
  new TomSelect("#institution-select",{
    create: true,
    sortField: {
      field: "text",
      direction: "asc"
    }
  });

  new TomSelect("#manuscript_status",{
    sortField: {
      field: "text",
      direction: "asc"
    }
  });

  new TomSelect("#manuscript_material",{
    sortField: {
      field: "text",
      direction: "asc"
    }
  });

  new TomSelect("#language_reference_id",{
    sortField: {
      field: "text",
      direction: "asc"
    },
    maxItems: null
  });
</script>
